<main>
    <section class="secao-admin">
        <div class="conteudo-admin">
            
            <!-- o cabeçalho -->
            <div class="cabecalho-admin">
                <h1>Painel Administrativo</h1>
                <button (click)="sair()">Sair</button>
            </div>

            <!-- abas de categoria -->
            <div class="abas-admin">
                <button [class.ativa]="abaAtiva === 'buques'" (click)="mudarAba('buques')">
                    Buquês
                </button>
                <button [class.ativa]="abaAtiva === 'arranjos'" (click)="mudarAba('arranjos')">
                    Arranjos
                </button>
                <button [class.ativa]="abaAtiva === 'presentes'" (click)="mudarAba('presentes')">
                    Presentes
                </button>
            </div>

            <!-- Formulario para adicionar produto -->
            <div class="formulario-adicionar">
                <h2>Adicionar Novo Produto</h2>
                <form (ngSubmit)="adicionarProduto()">
                    <div class="grupo-formulario">
                        <label>Nome do Produto</label>
                        <input type="text" [(ngModel)]="novoProduto.nome" name="nome" placeholder="Digite o nome" required>
                    </div>

                    <div class="grupo-formulario">
                        <label>Preço</label>
                        <input type="number" [(ngModel)]="novoProduto.preco" name="preco" placeholder="0.00" step="0.01" required>
                    </div>

                    <div class="grupo-formulario">
                        <label>Descrição</label>
                        <textarea [(ngModel)]="novoProduto.descricao" name="descricao" placeholder="Digite a descrição" rows="3"></textarea>
                    </div>

                    <div class="grupo-formulario">
                        <label>Nome da Imagem</label>
                        <input type="text" [(ngModel)]="novoProduto.nomeImagem" name="nomeImagem" placeholder="Ex: buque-01.jpg" required>
                        <small>Digite apenas o nome do arquivo (ex: buque-01.jpg)</small>
                    </div>

                    <button type="submit" class="botao-adicionar">Adicionar Produto</button>
                </form>
            </div>

            <!-- Lista de produtos -->
            <div class="lista-produtos">
                <h2>Produtos Cadastrados ({{ produtos().length }})</h2>
                
                @if (produtos().length === 0) {
                    <p class="sem-produtos">Nenhum produto cadastrado ainda.</p>
                } @else {
                    <div class="produtos-grid">
                        @for (produto of produtos(); track produto.id) {
                            <div class="card-produto">
                                <div class="imagem-produto">
                                    @if (produto.imagem) {
                                        <img [src]="produto.imagem" [alt]="produto.nome">
                                    } @else {
                                        <div class="sem-imagem">Sem imagem</div>
                                    }
                                </div>
                                
                                <div class="info-produto">
                                    <h3>{{ produto.nome }}</h3>
                                    <p class="preco">R$ {{ produto.preco.toFixed(2) }}</p>
                                    @if (produto.descricao) {
                                        <p class="descricao">{{ produto.descricao }}</p>
                                    }
                                </div>
                                
                                <button class="botao-deletar" (click)="deletarProduto(produto.id)">
                                    Deletar
                                </button>
                            </div>
                        }
                    </div>
                }
            </div>

        </div>
    </section>
</main>
